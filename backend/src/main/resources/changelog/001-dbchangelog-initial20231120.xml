<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet id="1700457174510-0" author="gorsk">
        <sql>
            CREATE SCHEMA IF NOT EXISTS wavvy;
        </sql>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-1">
        <createTable tableName="app_users" schemaName="wavvy">
            <column name="deleted" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="email_verified" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="enabled" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="created_timestamp" type="BIGINT"/>
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="app_users_pkey"/>
            </column>
            <column name="organization_id" type="UUID"/>
            <column name="disabled_reason" type="VARCHAR(255)"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="user_type" type="VARCHAR(255)"/>
            <column name="username" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-2">
        <createTable tableName="offers" schemaName="wavvy">
            <column name="budget" type="numeric(38, 2)"/>
            <column name="end_date" type="date"/>
            <column name="funding_level" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" type="date"/>
            <column name="created_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="offers_pkey"/>
            </column>
            <column name="description" type="VARCHAR(2000)"/>
            <column name="link" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="scope" type="VARCHAR(255)"/>
            <column name="target_audience" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-3">
        <createTable tableName="organizations" schemaName="wavvy">
            <column name="created_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="organizations_pkey"/>
            </column>
            <column name="organization_type" type="VARCHAR(31)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(2000)"/>
            <column name="apartment_number" type="VARCHAR(255)"/>
            <column name="bank_account" type="VARCHAR(255)"/>
            <column name="city" type="VARCHAR(255)"/>
            <column name="country" type="VARCHAR(255)"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="house_number" type="VARCHAR(255)"/>
            <column name="krs" type="VARCHAR(255)"/>
            <column name="legal_status" type="VARCHAR(255)"/>
            <column name="logo_path" type="VARCHAR(255)"/>
            <column name="logo_url" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="nip" type="VARCHAR(255)"/>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="regon" type="VARCHAR(255)"/>
            <column name="street" type="VARCHAR(255)"/>
            <column name="website" type="VARCHAR(255)"/>
            <column name="zip_code" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-4">
        <addUniqueConstraint columnNames="organization_id" constraintName="app_users_organization_id_key" tableName="app_users" schemaName="wavvy"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-5">
        <createTable tableName="business_areas" schemaName="wavvy">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="business_areas_pkey"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-6">
        <createTable tableName="conversation_users" schemaName="wavvy">
            <column name="conversation_id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="conversation_users_pkey"/>
            </column>
            <column name="user_id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="conversation_users_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-7">
        <createTable tableName="conversations" schemaName="wavvy">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="conversations_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-8">
        <createTable tableName="followed_offers" schemaName="wavvy">
            <column name="offer_id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="followed_offers_pkey"/>
            </column>
            <column name="user_id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="followed_offers_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-9">
        <createTable tableName="messages" schemaName="wavvy">
            <column name="created_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="conversation_id" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="from_user_id" type="UUID"/>
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="messages_pkey"/>
            </column>
            <column name="to_user_id" type="UUID"/>
            <column name="text" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-10">
        <createTable tableName="organization_business_areas" schemaName="wavvy">
            <column name="business_area_id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="organization_business_areas_pkey"/>
            </column>
            <column name="organization_id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="organization_business_areas_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-11">
        <createTable tableName="project_links" schemaName="wavvy">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="project_links_pkey"/>
            </column>
            <column name="project_id" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="link" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-12">
        <createTable tableName="projects" schemaName="wavvy">
            <column name="budget" type="numeric(38, 2)"/>
            <column name="possible_volunteer" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INTEGER"/>
            <column name="created_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="end_time" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="start_time" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="projects_pkey"/>
            </column>
            <column name="organizer_id" type="UUID"/>
            <column name="description" type="VARCHAR(2000)"/>
            <column name="apartment_number" type="VARCHAR(255)"/>
            <column name="city" type="VARCHAR(255)"/>
            <column name="cooperation_message" type="VARCHAR(255)"/>
            <column name="country" type="VARCHAR(255)"/>
            <column name="house_number" type="VARCHAR(255)"/>
            <column name="image_link" type="VARCHAR(255)"/>
            <column name="image_path" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="street" type="VARCHAR(255)"/>
            <column name="zip_code" type="VARCHAR(255)"/>
            <column name="likes" type="VARCHAR[]"/>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-13">
        <createTable tableName="resources" schemaName="wavvy">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="resources_pkey"/>
            </column>
            <column name="organization_id" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="resource" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-14">
        <createTable tableName="social_links" schemaName="wavvy">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="social_links_pkey"/>
            </column>
            <column name="organization_id" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="link" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-15">
        <createTable tableName="tags" schemaName="wavvy">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tags_pkey"/>
            </column>
            <column name="project_id" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="tag" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-16">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="resources" baseTableSchemaName="wavvy" constraintName="fk167y0wafmigf2hnfr01ly6l5b" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="organizations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-17">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="social_links" baseTableSchemaName="wavvy" constraintName="fk1nqu4wj05awpjchhgq70w3e06" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="organizations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-18">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="organization_business_areas" baseTableSchemaName="wavvy" constraintName="fk56abp0r4iad47w5bh0whkdw3s" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="organizations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-19">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="conversation_users" baseTableSchemaName="wavvy" constraintName="fk5g4nai3jhxm6h1w5ri59t2ayb" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="app_users" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-20">
        <addForeignKeyConstraint baseColumnNames="conversation_id" baseTableName="conversation_users" baseTableSchemaName="wavvy" constraintName="fk63p0tbk14kd41sn7v1cw6xp2f" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="conversations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-21">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="app_users" baseTableSchemaName="wavvy" constraintName="fkcoxpfr66jfdhdp3ncsb5do1ui" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="organizations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-22">
        <addForeignKeyConstraint baseColumnNames="offer_id" baseTableName="followed_offers" baseTableSchemaName="wavvy" constraintName="fkg0ub0wxn5mwm64wro7f7cc2i7" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="offers" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-23">
        <addForeignKeyConstraint baseColumnNames="from_user_id" baseTableName="messages" baseTableSchemaName="wavvy" constraintName="fkk7y7clocmdkr0mvk9fm5gh08s" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="app_users" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-24">
        <addForeignKeyConstraint baseColumnNames="project_id" baseTableName="project_links" baseTableSchemaName="wavvy" constraintName="fkmo4lq56vrdc8rw945qp25u0dh" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="projects" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-25">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="followed_offers" baseTableSchemaName="wavvy" constraintName="fkn8nig4qjk8bxobu6s627hroy9" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="app_users" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-26">
        <addForeignKeyConstraint baseColumnNames="project_id" baseTableName="tags" baseTableSchemaName="wavvy" constraintName="fkq3jsgk94g33jvd4src5q2xn4u" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="projects" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-27">
        <addForeignKeyConstraint baseColumnNames="organizer_id" baseTableName="projects" baseTableSchemaName="wavvy" constraintName="fkqurtdr8vqyo6x7jvjlmec4wdq" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="organizations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-28">
        <addForeignKeyConstraint baseColumnNames="conversation_id" baseTableName="messages" baseTableSchemaName="wavvy" constraintName="fkt492th6wsovh1nush5yl5jj8e" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="conversations" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-29">
        <addForeignKeyConstraint baseColumnNames="to_user_id" baseTableName="messages" baseTableSchemaName="wavvy" constraintName="fktc7per27p247dsin9ivkv0vyr" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="app_users" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
    <changeSet author="gorsk (generated)" id="1700457174510-30">
        <addForeignKeyConstraint baseColumnNames="business_area_id" baseTableName="organization_business_areas" baseTableSchemaName="wavvy" constraintName="fktoyeqpy1jktjfkisxd40xe10w" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="business_areas" referencedTableSchemaName="wavvy" validate="true"/>
    </changeSet>
</databaseChangeLog>
